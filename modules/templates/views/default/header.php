<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html class="home" lang="en"><!--<![endif]--> 
<head>
	<title>ERP - Enterprise Resource Planning</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	
	<meta name="description" content="{mtDesc}">
	<meta name="author" content="{mtAuth}">
	<meta name="viewport" content="initial-scale=1.0, width=device-width, maximum-scale=1, user-scalable=no">
	<meta charset="utf-8">
	
	<link rel="icon" href="<?php echo base_url()?>assets/image/button-blue.png">
	<link rel="shortcut icon" href="assets/image/button-blue.png">
	<link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url()?>assets/themes/redmond/jquery-ui-1.9.2.custom.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url()?>assets/themes/redmond/ui.layout.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url()?>assets/chosen.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url()?>assets/themes/ui.jqgrid.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url()?>assets/style.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url()?>assets/datatable_ui.css" />	
	<link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url()?>assets/dropdown/dropdown.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url()?>assets/tambahan.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url()?>assets/fixed_table_rc.css" />

	<!-- link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url()?>assets/themes/ui.multiselect.css" / -- merge ke style.css -->
	<!-- link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url()?>assets/ui.jqgrid.css" /-->	
	<!-- link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url() ?>assets/jquery-ui-1.10.0.custom.css"  /  -->
	<!-- link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url() ?>assets/jquery.tagit.css"  / -- merge ke style.css -->
	<!-- link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url() ?>assets/chosen.css"  / -->
	<!-- link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url() ?>assets/ui.multiselect.css" /-->
	<!-- link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url() ?>assets/ui.jqgrid.css"  /-->	
	<!-- link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url() ?>assets/dropdown/themes/flickr.com/default.ultimate.css"  / -->
	<!-- link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url() ?>assets/style_light.css"  -->
	<!-- link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url() ?>assets/dataTables.bootstrap.css"  > -->
	<!-- link rel="stylesheet" type="text/css" media="screen" href="<?php echo base_url() ?>assets/jquery.jscrollpane.css"    / -->
	
		
	<script src="<?php echo base_url()?>assets/js/jquery.1.7.2.min.js" type="text/javascript"></script>
	<script src="<?php echo base_url()?>assets/js/jquery.livequery.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="<?php echo base_url()?>assets/js/jquery.tablednd.js" type="text/javascript" charset="utf-8"></script>
	<script src="<?php echo base_url()?>assets/js/jquery.extra.js" type="text/javascript"></script>
	<script src="<?php echo base_url()?>assets/js/jquery-ui-1.9.2.custom.min.js" type="text/javascript"></script>
	<script src="<?php echo base_url()?>assets/js/jquery.layout-1.3.0.js" type="text/javascript"></script>
	<script src="<?php echo base_url()?>assets/js/jquery.cookie.js" type="text/javascript" ></script>
	<script src="<?php echo base_url()?>assets/js/jquery.dataTables.min.js" type="text/javascript"></script>
	<script src="<?php echo base_url()?>assets/js/datatables_api/fnSetFilteringDelay.js" type="text/javascript"></script>
	<script src="<?php echo base_url()?>assets/js/jquery-ui-timepicker-addon.js" type="text/javascript"></script>
	<script src="<?php echo base_url()?>assets/js/jquery.MultiFile.min.js" type="text/javascript"></script>
	
	<script src="<?php echo base_url()?>assets/js/ui.multiselect.js"></script>
	<script src="<?php echo base_url()?>assets/js/tag-it.min.js"></script>
	<script src="<?php echo base_url()?>assets/js/chosen.jquery.min.js"></script>
	<script src="<?php echo base_url()?>assets/js/i18n/grid.locale-en.js"></script>
	<script src="<?php echo base_url()?>assets/js/jquery.jqGrid.min.js"></script>

	<script src="<?php echo base_url()?>assets/js/ttw-notification-menu.min.js" type="text/javascript"></script>		
	<script src="<?php echo base_url()?>assets/js/function.js" type="text/javascript" ></script>
	<script src="<?php echo base_url()?>assets/js/func.js?time=<?php echo date("YmdHis") ?>" type="text/javascript" ></script>
	<script src="<?php echo base_url()?>assets/js/jquery.mousewheel.js" type="text/javascript"></script>
	<script src="<?php echo base_url()?>assets/js/jquery.jscrollpane.min.js" type="text/javascript"></script>
	<script src="<?php echo base_url()?>assets/js/FixedColumns.js" type="text/javascript" charset="utf-8"></script>
	<script src="<?php echo base_url()?>assets/js/combobox.js"></script>
	<script src="<?php echo base_url()?>assets/js/jquery.iframe-post-form.js"></script>
    <script src="<?php echo base_url()?>assets/js/autoNumeric.js"></script>
	<script src="<?php echo base_url()?>assets/js/jquery.treetable.js"></script>
    <script src="<?php echo base_url()?>assets/js/jquery.numeric.js"></script>
	<script src="<?php echo base_url()?>assets/js/jquery.elastic.source.js"></script>
	
	<script src="<?php echo base_url()?>assets/js/plc_function.js" type="text/javascript" ></script>
	<script src="<?php echo base_url()?>assets/js/number_format.js" type="text/javascript" ></script>
	<!--<script src="<?php echo base_url()?>assets/js/tinymce/tinymce.min.js" type="text/javascript" ></script>-->
	<script src="<?php echo base_url()?>assets/js/tiny_mce/tiny_mce.js" type="text/javascript" ></script>
	
	<script src="<?php echo base_url()?>assets/js/docxtemplater/FileSaver.min.js"></script>
	<script src="<?php echo base_url()?>assets/js/docxtemplater/jszip-utils.js"></script>
	<script src="<?php echo base_url()?>assets/js/docxtemplater/jszip.js"></script>
	<script src="<?php echo base_url()?>assets/js/docxtemplater/docxtemplater.js"></script>
	<script src="<?php echo base_url()?>assets/js/jquery.pleaseWait.js"></script>

	<script src="<?php echo base_url()?>assets/js/jquery.mask.js"></script>
	<script src="<?php echo base_url()?>assets/js/jquery.mask.min.js"></script>
	<script src="<?php echo base_url()?>assets/js/jquery.sparkline.js"></script>
	
	<script src="<?php echo base_url()?>assets/js/Chart.bundle.js"></script>
	<script src="<?php echo base_url()?>assets/js/fixed_table_rc.js"></script>
	<script src="<?php echo base_url()?>assets/js/simpleupload.js" type="text/javascript" ></script>

	<script src="<?php echo base_url()?>node_modules/socket.io/node_modules/socket.io-client/socket.io.js"></script>
	
	<?php
		$sess_auth = new Zend_Session_Namespace('auth');
		$gCompId = $sess_auth->gComId;
	?>
	<script type="text/javascript">		
		
		var base_url = '<?php echo base_url()?>';
		var _base_url = '<?php echo base_url() ?>';
		var idPT = '<?php echo $gCompId ?>';
		
		var url = document.URL;
		var _url = url.split('/');                
		//console.log(_url);
                //console.log(_url.length)
		if (_url[4] != 'home') {		
                    location.href= url+'home/'+idPT;			
		} else {
                    console.log(_url[5]);
                    if (_url[5] == undefined || _url[5] == '') {
                            location.href= url+'/'+idPT;
                    }
		}
                //if (_url.length < 6) location.href = url+'/'+idPT;
		
		function confirm_delete_box(txt_conf, url, data, no_grid){
			$( "#dialog-confirm-text" ).text(txt_conf);
			$( "#dialog-confirm" ).dialog({
				resizable: false,
				height:140,
				modal: true,
				buttons: {
					Yes: function() {
						$.ajax({
							'url'  : url,
							'data' : data,
							'success' : function(data) {
								if (data > 0) {
									if (no_grid == '') {									
										oTable.fnDraw();
									} else {														
										$('#grid_'+no_grid).trigger('reloadGrid');
									}
								} else {
									alert_box('Data gagal dihapus');
									return false;
								}
							}
						});
						$( this ).dialog( "close" );
					},
					No: function() {
						$( this ).dialog( "close" );
					}
				}
			});
		}
	
		function information_box(txt_info){
			$( "#dialog-info-text" ).text(txt_info);
			$( "#dialog-info" ).dialog({
				resizable: false,
				height:140,
				modal: true,
				buttons: {
					OK: function() {
						$( this ).dialog( "close" );
					}
				}
			});
		}
		
		function alert_box(txt_alert){
			$( "#dialog-alert-text" ).text(txt_alert);
			$( "#dialog-alert" ).dialog({
				resizable: false,
				height:140,
				modal: true,
				buttons: {
					OK: function() {
						$( this ).dialog( "close" );
					}
				}
			});
		}


		$(document).ready(function(){
			$("#message_header_panel").button({ icons: { primary: " ui-icon-mail-closed"} });


			/*Node JS Kangge reload pesan*/
			var socket = io.connect( 'http://10.1.49.8:19391' );
			socket.on( 'new_count_message_<?php echo $NIPUser ?>', function( data ) {
			    $( ".new_count_message_<?php echo $NIPUser ?>" ).html( data.new_count_message );
			    $("span #new_count_message_header_<?php echo $NIPUser ?>").removeAttr('style');
			    if(data.new_count_message>=1){
			    	$("span #new_count_message_header_<?php echo $NIPUser ?>").attr('style');
			    	$("span #new_count_message_header_<?php echo $NIPUser ?>").css({'color':'red'});
			    }
			 });
			socket.on( 'update_count_erp_inbox_<?php echo $NIPUser ?>', function( data ) {
			    $( ".new_count_message_<?php echo $NIPUser ?>" ).html( data.count_inbox_erp_new );
			    $("span #new_count_message_header_<?php echo $NIPUser ?>").removeAttr('style');
			    if(data.count_inbox_erp_new>=1){
			    	$("span #new_count_message_header_<?php echo $NIPUser ?>").attr('style');
			    	$("span #new_count_message_header_<?php echo $NIPUser ?>").css({'color':'red'});
			    }
			 });
			socket.on('show_notif_new_message_erp_<?php echo $NIPUser ?>', function( data ) {
				notifyMe(data.data_details.vsubject,data.data_details.tmessage);
			});
		});

		// request permission on page load
		function notifyMe(caption='',message='') {
		  if (!Notification) {
		    alert('Desktop notifications not available in your browser. Try Chromium.'); 
		    return;
		  }

		  if (Notification.permission !== "granted")
		    Notification.requestPermission();
		  else {
		  	var lg=message.length;
		  	if(lg>=50){
		  		message=message.substr(0,50);
		  	}
		    var notification = new Notification(caption, {
		      body: message+'...........',
		    });

		    notification.onclick = function () {
		    };
		    
		  }

		}
	</script>	
</head>
<body>
<div id="dialog-confirm" title="Confirmation" class="ui-helper-hidden">
	<p>
		<span class="ui-icon ui-icon-alert icon-box-alert" ></span>
		<span id="dialog-confirm-text"></span>
	</p>
</div>

<div id="dialog-alert" title="Alert" class="ui-helper-hidden">
	<p>
		<span class="ui-icon ui-icon-alert icon-box-alert"></span>
		<span id="dialog-alert-text"></span>
	</p>
</div>

<div id="dialog-info" title="Information" class="ui-helper-hidden">
	<p>
		<span class="ui-icon ui-icon-info icon-box-alert"></span>
		<span id="dialog-info-text"></span>
	</p>
</div>